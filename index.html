<!--A Design by W3layouts
  Author: W3layout
  Author URL: http://w3layouts.com
  License: Creative Commons Attribution 3.0 Unported
  License URL: http://creativecommons.org/licenses/by/3.0/
  -->
<!DOCTYPE html>
<html lang="en">
  <head>

    <!-- Meta tags -->
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content=" Marvel Sign In Form Responsive Widget, Audio and Video players, Login Form Web Template, Flat Pricing Tables, Flat Drop-Downs, Sign-Up Web Templates, Flat Web Templates,
      Login Sign-up Responsive Web Template, Smartphone Compatible Web Template, Free Web Designs for Nokia, Samsung, LG, Sony Ericsson, Motorola Web Design"/>
    <script>
      addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); }
    </script>
    <!-- Meta tags -->
    <!-- font-awesome icons -->
    <link href="css/font-awesome.min.css" rel="stylesheet">
    <!-- //font-awesome icons -->
    <!--stylesheets-->
    <link href="css/style.css" rel='stylesheet' type='text/css' media="all">
    <!--//style sheet end here-->
    <link id="theme" rel="stylesheet" href="css/purplesidebar.css" type="text/css">

    <link href="//fonts.googleapis.com/css?family=Tangerine:400,700" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Montserrat:300,400,500,600" rel="stylesheet">
     <script src="js/jquery.min.js"></script>
   <script src="js/jquery.session.js"></script>
    <script src="vendor/bootstrap-4.1.3/js/bootstrap.min.js"></script>

  <script src="js/jquery.validate.js"></script>
  </head>
 <style type="text/css">
  .tab {
  overflow: hidden;
  border: 1px solid #ccc;
  background-color: #f1f1f1;
}

/* Style the buttons inside the tab */
.tab button {
  background-color: inherit;
  float: left;
  border: none;
  outline: none;
  cursor: pointer;
  padding: 14px 16px;
  transition: 0.3s;
  font-size: 17px;
}

/* Change background color of buttons on hover */
.tab button:hover {
  background-color: #08bb8c;
}

/* Create an active/current tablink class */
.tab button.active {
  background-color: #08bb8c;
}

/* Style the tab content */
.tabcontent {
 
  padding: 6px 12px;
  border: 1px solid #ccc;
  border-top: none;
}
</style>
  <body>
    <div class="back-image bg bg1">
      <h1 class="header-w3ls ">
        Nipocket
      </h1>
      <div class="main ">
        <div class="headder-icon">
          <div class="top-icon ">
          <img src="img/logo.png" style="vertical-align: baseline;border-style: none;">
          </div>
        </div>
        <div class="its-sign-in">
          <h2 class="">Sign in Here</h2>
        </div>
           <div class="tab">
  <button class="tablinks active" style="width: 50%" onclick="openCity(event, 'personal')">Personal</button>
  <button style="width: 50%" class="tablinks" onclick="openCity(event, 'business')">Business</button>

</div>
        <form id="login"  method="post">
          <div class="form-left-w3l ">
            <input type="hidden" name="login_type" id="login_type" value="personal" >
          <input type="hidden" name="secrete" value="Penisking">

            <input type="text" placeholder="Mobile Number" name="mobile" id="mobile" >
          </div>
          <div class="form-left-w3l ">
            <input type="password" placeholder="Password" name="password" id="password"  >
            <label style="color: red" id="login_err"></label>
          </div>
          <div class="rem-pass-agile">
            <div class="right-side">
              <a href="#" class="for ">Forgot password...?</a>
            </div>
            <div class="clear"></div>
          </div>
          <div class="btnn">
            <button type="submit" class="btn">Sign in</button><br>
            <div class="clear"></div>
          </div>
        </form>
       
       
        <div class="left-side">
            <br>
          <a href="#" class="for ">U Dont Have an Account <a href="signup.html"> Sign up </a>
        </div>
      </div>
      <div class="copy">
       
       
      </div>

      <div class="modal fade" id="createOrder" data-backdrop="static"  tabindex="-1" role="dialog" aria-labelledby="createOrderTitle" aria-hidden="true">
        <div class="modal-dialog modal-sm" role="document">
            <div class="modal-content">
                <div class="modal-header pink-gradient" id="createOrderTitle">
                    <div class="col text-center">
                        <h5 class="mt-3">Email Varification </h5>
                        <p>Almost Done  Just verify Your Email..!</p>
                    </div>
                  
                </div>
                <form id="verify_otp" method="post">
                <div class="modal-body">
                    <div class="row justify-content-center">
                        <div class="col-md-10 mx-auto">
                            <div class="form-group row">
                                <div class="col-sm-12 col-sm-12">
                                     <p>OTP Sent On Your Register Email</p>
                                       <div class="form-left-w3l " id="tt" >
                                    <input style="width: 80%;" name="otp" id="otp" type="text" placeholder="Enter OTP here">
                                  <input type="hidden" name="secrete" value="Penisking">
                                  <br>
                                  <lable class="errors" id="er"></lable>
                                  </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                   
                    <button type="submit" class="btn btn-primary">Signin</button>
                </div>
              </form>
            </div>
        </div>
    </div>
    </div>
    <script type="text/javascript">
   function openCity(evt, cityName) {
  var i, tabcontent, tablinks;
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }
  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }
 
  evt.currentTarget.className += " active";
  $('#login_type').val(cityName);
}


  $(document).ready(function () {

var path = 'http://bitinfous.com/nipocket/';
     var errorMsg = '', $valid = false;
     var errorMsg2 = '', $valid2 = false;
  
  $.validator.addMethod("checkexist",function(val, elem){
    var login_type = $('#login_type').val();
    var t = '';
    if(login_type == 'personal'){
    t = 'ni_personal_users';
    }else{
    t = 'ni_business_users';

    }
    
   $.ajax({
      url:path+'home/checkexist/'+t+'/mobile/'+val,
      type:"POST",
      success:function(response){
        //alert(response);
         if(response == 'false'){
          //alert('f')
            
            $valid = true;
         }
         else{
          //alert('t')
            errorMsg = 'Mobile Number Not Register..';
            $valid = false;
         }
      }
   });
   $.validator.messages["checkexist"] = errorMsg;
   return $valid;
},'');




  $('#login').validate({ 
    errorLabelContainer: "#cs-error-note",
   
     errorClass: 'errors',
    rules: {
     
       
        mobile: {
           number: true,
            required: true,
            maxlength: 10,
            minlength: 10,
            checkexist: true,
        },
        password: {
            required: true,
            //  maxlength: 8,
            // minlength: 8,
        }
    },
    messages: {
       
        
        mobile: {
            number: "Please Enter Numeric",
            required: "Please enter  mobile.",
          minlength: "Mobile Number must consist of at least 10 Digit",
          malength: "Mobile Number must consist of at least 10 Digit",
        },
       
         password: {
            required: "Please enter  Password.",
          //    minlength: "Password must consist of at least 8 Digit",
          // malength: "Password must consist of at least 8 Digit",
        },
    },
    submitHandler: function(form) {
     var mobile = $('#mobile').val();  
     
      form =$('#login').serialize();
     $.ajax({
            url: path+"api/login", 
            type: "POST",
            data:form,             
           
            success: function(data) {
              //alert(data);
               var d = $.parseJSON(data);
              if(d.status == 1){
 $.session.set('user',d.username) 
             location.href = "home.html";
              }else if(d.result == 'verification_pending'){
              $('#tt').append('<input type="hidden" name="type" id="type" value="'+d.login_type+'"><input type="hidden" name="device_type" value="Web"><input type="hidden" name="mobile" value="'+d.mobile+'"><input type="hidden" name="username" id="username" value="'+d.username+'">');
      $('#createOrder').modal('show');
            }else{
                //alert('gf');
                $('#login_err').html(d.message);
              }
            }
        });
     //    return false;
    },
    }); 



$.validator.addMethod("correct_otp",function(otp, elem){
    var type = $('#type').val();
    //alert(type);
    var t = '';
    if(type == 'personal'){
    t = 'ni_personal_users';
    }else{
    t = 'ni_business_users';

    }
    //alert(t);
    
   $.ajax({
     url:path+'home/checkexist/'+t+'/otp/'+otp,
      type:"POST",
      success:function(data){
       // alert(data);
        if(data == 'true'){
          //alert('f')
            errorMsg2 = 'Please Enetr Valid OTP..!';
            $valid2 = false;
         }
         else{
          //alert('t')
            $valid2 = true;
         }
      }
   });
   $.validator.messages["correct_otp"] = errorMsg2;
   return $valid2;
},'');

 $('#verify_otp').validate({ 
    errorLabelContainer: "#cs-error-note",
   
     errorClass: 'errors',
    rules: {
     
        otp: {
            number: true,
            required: true,
            maxlength: 6,
            minlength: 6,
            correct_otp:true,
        }
  
    },
    messages: {
       
        otp: {
            number: "Please Enter Numeric",
            required: "Please enter  OTP.",
          minlength: "OTP must consist of at least 6 Digit",
          malength: "OTP must consist of at least 6 Digit",
        },
        
    },
    submitHandler: function(form) {
     var user_name = $('#username').val();  
      
      form =$('#verify_otp').serialize();
     $.ajax({
            url: path+"api/otp_verify", 
            type: "POST",
            data:form,             
           
            success: function(data) {
              //alert(data);
               var d = $.parseJSON(data);
              if(d.status == 1){
                $('#er').html('');
                //alert(user_name);
        $.session.set('user',user_name) 
             location.href = "home.html";
              }else{
                $('#er').html(d.message);
              }
            }
        });
     //    return false;
    },
    }); 

    });
</script>
  </body>


</html>